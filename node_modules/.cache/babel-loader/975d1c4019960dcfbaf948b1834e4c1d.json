{"ast":null,"code":"\"use strict\";\n\nmodule.exports = function (Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug) {\n  var getDomain = Promise._getDomain;\n\n  var util = require(\"./util\");\n\n  var tryCatch = util.tryCatch;\n\n  function ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var domain = getDomain();\n    this._fn = domain === null ? fn : util.domainBind(domain, fn);\n\n    if (initialValue !== undefined) {\n      initialValue = Promise.resolve(initialValue);\n\n      initialValue._attachCancellationCallback(this);\n    }\n\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n\n    if (_each === INTERNAL) {\n      this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n      this._eachValues = null;\n    } else {\n      this._eachValues = undefined;\n    }\n\n    this._promise._captureStackTrace();\n\n    this._init$(undefined, -5);\n  }\n\n  util.inherits(ReductionPromiseArray, PromiseArray);\n\n  ReductionPromiseArray.prototype._gotAccum = function (accum) {\n    if (this._eachValues !== undefined && this._eachValues !== null && accum !== INTERNAL) {\n      this._eachValues.push(accum);\n    }\n  };\n\n  ReductionPromiseArray.prototype._eachComplete = function (value) {\n    if (this._eachValues !== null) {\n      this._eachValues.push(value);\n    }\n\n    return this._eachValues;\n  };\n\n  ReductionPromiseArray.prototype._init = function () {};\n\n  ReductionPromiseArray.prototype._resolveEmptyArray = function () {\n    this._resolve(this._eachValues !== undefined ? this._eachValues : this._initialValue);\n  };\n\n  ReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n  };\n\n  ReductionPromiseArray.prototype._resolve = function (value) {\n    this._promise._resolveCallback(value);\n\n    this._values = null;\n  };\n\n  ReductionPromiseArray.prototype._resultCancelled = function (sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n\n    this._resultCancelled$();\n\n    if (this._currentCancellable instanceof Promise) {\n      this._currentCancellable.cancel();\n    }\n\n    if (this._initialValue instanceof Promise) {\n      this._initialValue.cancel();\n    }\n  };\n\n  ReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n\n    if (this._initialValue !== undefined) {\n      value = this._initialValue;\n      i = 0;\n    } else {\n      value = Promise.resolve(values[0]);\n      i = 1;\n    }\n\n    this._currentCancellable = value;\n\n    if (!value.isRejected()) {\n      for (; i < length; ++i) {\n        var ctx = {\n          accum: null,\n          value: values[i],\n          index: i,\n          length: length,\n          array: this\n        };\n        value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n      }\n    }\n\n    if (this._eachValues !== undefined) {\n      value = value._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n\n    value._then(completed, completed, undefined, value, this);\n  };\n\n  Promise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n  };\n\n  Promise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n  };\n\n  function completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n      array._resolve(valueOrReason);\n    } else {\n      array._reject(valueOrReason);\n    }\n  }\n\n  function reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n      return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n  }\n\n  function gotAccum(accum) {\n    this.accum = accum;\n\n    this.array._gotAccum(accum);\n\n    var value = tryConvertToPromise(this.value, this.array._promise);\n\n    if (value instanceof Promise) {\n      this.array._currentCancellable = value;\n      return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n      return gotValue.call(this, value);\n    }\n  }\n\n  function gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n\n    promise._pushContext();\n\n    var ret;\n\n    if (array._eachValues !== undefined) {\n      ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n      ret = fn.call(promise._boundValue(), this.accum, value, this.index, this.length);\n    }\n\n    if (ret instanceof Promise) {\n      array._currentCancellable = ret;\n    }\n\n    var promiseCreated = promise._popContext();\n\n    debug.checkForgottenReturns(ret, promiseCreated, array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\", promise);\n    return ret;\n  }\n};","map":{"version":3,"names":["module","exports","Promise","PromiseArray","apiRejection","tryConvertToPromise","INTERNAL","debug","getDomain","_getDomain","util","require","tryCatch","ReductionPromiseArray","promises","fn","initialValue","_each","constructor$","domain","_fn","domainBind","undefined","resolve","_attachCancellationCallback","_initialValue","_currentCancellable","_eachValues","Array","_length","_promise","_captureStackTrace","_init$","inherits","prototype","_gotAccum","accum","push","_eachComplete","value","_init","_resolveEmptyArray","_resolve","shouldCopyValues","_resolveCallback","_values","_resultCancelled","sender","_cancel","_isResolved","_resultCancelled$","cancel","_iterate","values","i","length","isRejected","ctx","index","array","_then","gotAccum","completed","reduce","valueOrReason","isFulfilled","_reject","classString","promise","gotValue","call","_pushContext","ret","_boundValue","promiseCreated","_popContext","checkForgottenReturns"],"sources":["E:/react-projects/new project/2022/converter/converter/node_modules/mammoth/node_modules/bluebird/js/release/reduce.js"],"sourcesContent":["\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = require(\"./util\");\nvar tryCatch = util.tryCatch;\n\nfunction ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var domain = getDomain();\n    this._fn = domain === null ? fn : util.domainBind(domain, fn);\n    if (initialValue !== undefined) {\n        initialValue = Promise.resolve(initialValue);\n        initialValue._attachCancellationCallback(this);\n    }\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n    if(_each === INTERNAL) {\n        this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n        this._eachValues = null;\n    } else {\n        this._eachValues = undefined;\n    }\n    this._promise._captureStackTrace();\n    this._init$(undefined, -5);\n}\nutil.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._gotAccum = function(accum) {\n    if (this._eachValues !== undefined && \n        this._eachValues !== null && \n        accum !== INTERNAL) {\n        this._eachValues.push(accum);\n    }\n};\n\nReductionPromiseArray.prototype._eachComplete = function(value) {\n    if (this._eachValues !== null) {\n        this._eachValues.push(value);\n    }\n    return this._eachValues;\n};\n\nReductionPromiseArray.prototype._init = function() {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function() {\n    this._resolve(this._eachValues !== undefined ? this._eachValues\n                                                 : this._initialValue);\n};\n\nReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nReductionPromiseArray.prototype._resolve = function(value) {\n    this._promise._resolveCallback(value);\n    this._values = null;\n};\n\nReductionPromiseArray.prototype._resultCancelled = function(sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n    this._resultCancelled$();\n    if (this._currentCancellable instanceof Promise) {\n        this._currentCancellable.cancel();\n    }\n    if (this._initialValue instanceof Promise) {\n        this._initialValue.cancel();\n    }\n};\n\nReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n    if (this._initialValue !== undefined) {\n        value = this._initialValue;\n        i = 0;\n    } else {\n        value = Promise.resolve(values[0]);\n        i = 1;\n    }\n\n    this._currentCancellable = value;\n\n    if (!value.isRejected()) {\n        for (; i < length; ++i) {\n            var ctx = {\n                accum: null,\n                value: values[i],\n                index: i,\n                length: length,\n                array: this\n            };\n            value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n        }\n    }\n\n    if (this._eachValues !== undefined) {\n        value = value\n            ._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n    value._then(completed, completed, undefined, value, this);\n};\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n\nfunction completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n        array._resolve(valueOrReason);\n    } else {\n        array._reject(valueOrReason);\n    }\n}\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nfunction gotAccum(accum) {\n    this.accum = accum;\n    this.array._gotAccum(accum);\n    var value = tryConvertToPromise(this.value, this.array._promise);\n    if (value instanceof Promise) {\n        this.array._currentCancellable = value;\n        return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n        return gotValue.call(this, value);\n    }\n}\n\nfunction gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n    promise._pushContext();\n    var ret;\n    if (array._eachValues !== undefined) {\n        ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n        ret = fn.call(promise._boundValue(),\n                              this.accum, value, this.index, this.length);\n    }\n    if (ret instanceof Promise) {\n        array._currentCancellable = ret;\n    }\n    var promiseCreated = promise._popContext();\n    debug.checkForgottenReturns(\n        ret,\n        promiseCreated,\n        array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\",\n        promise\n    );\n    return ret;\n}\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}