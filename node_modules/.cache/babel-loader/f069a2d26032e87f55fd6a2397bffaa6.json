{"ast":null,"code":"var _ = require(\"underscore\");\n\nvar xmlbuilder = require(\"xmlbuilder\");\n\nexports.writeString = writeString;\n\nfunction writeString(root, namespaces) {\n  var uriToPrefix = _.invert(namespaces);\n\n  var nodeWriters = {\n    element: writeElement,\n    text: writeTextNode\n  };\n\n  function writeNode(builder, node) {\n    return nodeWriters[node.type](builder, node);\n  }\n\n  function writeElement(builder, element) {\n    var elementBuilder = builder.element(mapElementName(element.name), element.attributes);\n    element.children.forEach(function (child) {\n      writeNode(elementBuilder, child);\n    });\n  }\n\n  function mapElementName(name) {\n    var longFormMatch = /^\\{(.*)\\}(.*)$/.exec(name);\n\n    if (longFormMatch) {\n      var prefix = uriToPrefix[longFormMatch[1]];\n      return prefix + (prefix === \"\" ? \"\" : \":\") + longFormMatch[2];\n    } else {\n      return name;\n    }\n  }\n\n  function writeDocument(root) {\n    var builder = xmlbuilder.create(mapElementName(root.name), {\n      version: '1.0',\n      encoding: 'UTF-8',\n      standalone: true\n    });\n\n    _.forEach(namespaces, function (uri, prefix) {\n      var key = \"xmlns\" + (prefix === \"\" ? \"\" : \":\" + prefix);\n      builder.attribute(key, uri);\n    });\n\n    root.children.forEach(function (child) {\n      writeNode(builder, child);\n    });\n    return builder.end();\n  }\n\n  return writeDocument(root);\n}\n\nfunction writeTextNode(builder, node) {\n  builder.text(node.value);\n}","map":{"version":3,"names":["_","require","xmlbuilder","exports","writeString","root","namespaces","uriToPrefix","invert","nodeWriters","element","writeElement","text","writeTextNode","writeNode","builder","node","type","elementBuilder","mapElementName","name","attributes","children","forEach","child","longFormMatch","exec","prefix","writeDocument","create","version","encoding","standalone","uri","key","attribute","end","value"],"sources":["E:/react-projects/new project/2022/converter/converter/node_modules/mammoth/lib/xml/writer.js"],"sourcesContent":["var _ = require(\"underscore\");\nvar xmlbuilder = require(\"xmlbuilder\");\n\n\nexports.writeString = writeString;\n\n\nfunction writeString(root, namespaces) {\n    var uriToPrefix = _.invert(namespaces);\n    \n    var nodeWriters = {\n        element: writeElement,\n        text: writeTextNode\n    };\n\n    function writeNode(builder, node) {\n        return nodeWriters[node.type](builder, node);\n    }\n\n    function writeElement(builder, element) {\n        var elementBuilder = builder.element(mapElementName(element.name), element.attributes);\n        element.children.forEach(function(child) {\n            writeNode(elementBuilder, child);\n        });\n    }\n    \n    function mapElementName(name) {\n        var longFormMatch = /^\\{(.*)\\}(.*)$/.exec(name);\n        if (longFormMatch) {\n            var prefix = uriToPrefix[longFormMatch[1]];\n            return prefix + (prefix === \"\" ? \"\" : \":\") + longFormMatch[2];\n        } else {\n            return name;\n        }\n    }\n    \n    function writeDocument(root) {\n        var builder = xmlbuilder\n            .create(mapElementName(root.name), {\n                version: '1.0',\n                encoding: 'UTF-8',\n                standalone: true\n            });\n        \n        _.forEach(namespaces, function(uri, prefix) {\n            var key = \"xmlns\" + (prefix === \"\" ? \"\" : \":\" + prefix);\n            builder.attribute(key, uri);\n        });\n        \n        root.children.forEach(function(child) {\n            writeNode(builder, child);\n        });\n        return builder.end();\n    }\n\n    return writeDocument(root);\n}\n\nfunction writeTextNode(builder, node) {\n    builder.text(node.value);\n}\n"],"mappings":"AAAA,IAAIA,CAAC,GAAGC,OAAO,CAAC,YAAD,CAAf;;AACA,IAAIC,UAAU,GAAGD,OAAO,CAAC,YAAD,CAAxB;;AAGAE,OAAO,CAACC,WAAR,GAAsBA,WAAtB;;AAGA,SAASA,WAAT,CAAqBC,IAArB,EAA2BC,UAA3B,EAAuC;EACnC,IAAIC,WAAW,GAAGP,CAAC,CAACQ,MAAF,CAASF,UAAT,CAAlB;;EAEA,IAAIG,WAAW,GAAG;IACdC,OAAO,EAAEC,YADK;IAEdC,IAAI,EAAEC;EAFQ,CAAlB;;EAKA,SAASC,SAAT,CAAmBC,OAAnB,EAA4BC,IAA5B,EAAkC;IAC9B,OAAOP,WAAW,CAACO,IAAI,CAACC,IAAN,CAAX,CAAuBF,OAAvB,EAAgCC,IAAhC,CAAP;EACH;;EAED,SAASL,YAAT,CAAsBI,OAAtB,EAA+BL,OAA/B,EAAwC;IACpC,IAAIQ,cAAc,GAAGH,OAAO,CAACL,OAAR,CAAgBS,cAAc,CAACT,OAAO,CAACU,IAAT,CAA9B,EAA8CV,OAAO,CAACW,UAAtD,CAArB;IACAX,OAAO,CAACY,QAAR,CAAiBC,OAAjB,CAAyB,UAASC,KAAT,EAAgB;MACrCV,SAAS,CAACI,cAAD,EAAiBM,KAAjB,CAAT;IACH,CAFD;EAGH;;EAED,SAASL,cAAT,CAAwBC,IAAxB,EAA8B;IAC1B,IAAIK,aAAa,GAAG,iBAAiBC,IAAjB,CAAsBN,IAAtB,CAApB;;IACA,IAAIK,aAAJ,EAAmB;MACf,IAAIE,MAAM,GAAGpB,WAAW,CAACkB,aAAa,CAAC,CAAD,CAAd,CAAxB;MACA,OAAOE,MAAM,IAAIA,MAAM,KAAK,EAAX,GAAgB,EAAhB,GAAqB,GAAzB,CAAN,GAAsCF,aAAa,CAAC,CAAD,CAA1D;IACH,CAHD,MAGO;MACH,OAAOL,IAAP;IACH;EACJ;;EAED,SAASQ,aAAT,CAAuBvB,IAAvB,EAA6B;IACzB,IAAIU,OAAO,GAAGb,UAAU,CACnB2B,MADS,CACFV,cAAc,CAACd,IAAI,CAACe,IAAN,CADZ,EACyB;MAC/BU,OAAO,EAAE,KADsB;MAE/BC,QAAQ,EAAE,OAFqB;MAG/BC,UAAU,EAAE;IAHmB,CADzB,CAAd;;IAOAhC,CAAC,CAACuB,OAAF,CAAUjB,UAAV,EAAsB,UAAS2B,GAAT,EAAcN,MAAd,EAAsB;MACxC,IAAIO,GAAG,GAAG,WAAWP,MAAM,KAAK,EAAX,GAAgB,EAAhB,GAAqB,MAAMA,MAAtC,CAAV;MACAZ,OAAO,CAACoB,SAAR,CAAkBD,GAAlB,EAAuBD,GAAvB;IACH,CAHD;;IAKA5B,IAAI,CAACiB,QAAL,CAAcC,OAAd,CAAsB,UAASC,KAAT,EAAgB;MAClCV,SAAS,CAACC,OAAD,EAAUS,KAAV,CAAT;IACH,CAFD;IAGA,OAAOT,OAAO,CAACqB,GAAR,EAAP;EACH;;EAED,OAAOR,aAAa,CAACvB,IAAD,CAApB;AACH;;AAED,SAASQ,aAAT,CAAuBE,OAAvB,EAAgCC,IAAhC,EAAsC;EAClCD,OAAO,CAACH,IAAR,CAAaI,IAAI,CAACqB,KAAlB;AACH"},"metadata":{},"sourceType":"script"}