{"ast":null,"code":"var fs = require('fs');\n\nvar childprocess = require('child_process');\n\nvar path = require('path');\n\nvar assert = require('assert');\n\ntry {\n  var phantomjs = require('phantomjs-prebuilt');\n} catch (err) {\n  console.log('html-pdf: Failed to load PhantomJS module.', err);\n}\n/*\n* phantomjs version 1.8.1 and later should work.\n*\n* Create a PDF file out of an html string.\n*\n* Regions for the PDF page are:\n*\n* - Page Header  -> document.getElementById('pageHeader')\n* - Page Content -> document.getElementById('pageContent')\n* - Page Footer  -> document.getElementById('pageFooter')\n*\n* When no #pageContent is available, phantomjs will use document.body as pdf content\n*/\n\n\nmodule.exports = PDF;\n\nfunction PDF(html, options) {\n  this.html = html;\n  this.options = options || {};\n\n  if (this.options.script) {\n    this.script = path.normalize(this.options.script);\n  } else {\n    this.script = path.join(__dirname, 'scripts', 'pdf_a4_portrait.js');\n  }\n\n  if (this.options.filename) this.options.filename = path.resolve(this.options.filename);\n  if (!this.options.phantomPath) this.options.phantomPath = phantomjs && phantomjs.path;\n  this.options.phantomArgs = this.options.phantomArgs || [];\n  assert(this.options.phantomPath, \"html-pdf: Failed to load PhantomJS module. You have to set the path to the PhantomJS binary using 'options.phantomPath'\");\n  assert(typeof this.html === 'string' && this.html.length, \"html-pdf: Can't create a pdf without an html string\");\n  this.options.timeout = parseInt(this.options.timeout, 10) || 30000;\n}\n\nPDF.prototype.toBuffer = function PdfToBuffer(callback) {\n  this.exec(function execPdfToBuffer(err, res) {\n    if (err) return callback(err);\n    fs.readFile(res.filename, function readCallback(err, buffer) {\n      if (err) return callback(err);\n      fs.unlink(res.filename, function unlinkPdfFile(err) {\n        if (err) return callback(err);\n        callback(null, buffer);\n      });\n    });\n  });\n};\n\nPDF.prototype.toStream = function PdfToStream(callback) {\n  this.exec(function (err, res) {\n    if (err) return callback(err);\n\n    try {\n      var stream = fs.createReadStream(res.filename);\n    } catch (err) {\n      return callback(err);\n    }\n\n    stream.on('end', function () {\n      fs.unlink(res.filename, function unlinkPdfFile(err) {\n        if (err) console.log('html-pdf:', err);\n      });\n    });\n    callback(null, stream);\n  });\n};\n\nPDF.prototype.toFile = function PdfToFile(filename, callback) {\n  assert(arguments.length > 0, 'html-pdf: The method .toFile([filename, ]callback) requires a callback.');\n\n  if (filename instanceof Function) {\n    callback = filename;\n    filename = undefined;\n  } else {\n    this.options.filename = path.resolve(filename);\n  }\n\n  this.exec(callback);\n};\n\nPDF.prototype.exec = function PdfExec(callback) {\n  var child = childprocess.spawn(this.options.phantomPath, [].concat(this.options.phantomArgs, [this.script]), this.options.childProcessOptions);\n  var stderr = [];\n  var timeout = setTimeout(function execTimeout() {\n    respond(null, new Error('html-pdf: PDF generation timeout. Phantom.js script did not exit.'));\n  }, this.options.timeout);\n\n  function onError(buffer) {\n    stderr.push(buffer);\n  }\n\n  function onData(buffer) {\n    var result;\n\n    try {\n      var json = buffer.toString().trim();\n      if (json) result = JSON.parse(json);\n    } catch (err) {\n      // Proxy for debugging purposes\n      process.stdout.write(buffer);\n    }\n\n    if (result) respond(null, null, result);\n  }\n\n  var callbacked = false;\n\n  function respond(code, err, data) {\n    if (callbacked) return;\n    callbacked = true;\n    clearTimeout(timeout); // If we don't have an exit code, we kill the process, ignore stderr after this point\n\n    if (code === null) kill(child, onData, onError);\n\n    if (!data) {\n      if (!err && code) err = new Error(\"html-pdf: Received the exit code '\" + code + \"'\");else if (!err) err = new Error('html-pdf: Unknown Error');\n      var postfix = stderr.length ? '\\n' + Buffer.concat(stderr).toString() : '';\n      if (postfix) err.message += postfix;\n      return callback(err, null);\n    }\n\n    callback(null, data);\n  }\n\n  child.stdout.on('data', onData);\n  child.stderr.on('data', onError);\n  child.on('error', function onError(err) {\n    respond(null, err);\n  }); // An exit event is most likely an error because we didn't get any data at this point\n\n  child.on('close', respond);\n  child.on('exit', respond);\n  var config = JSON.stringify({\n    html: this.html,\n    options: this.options\n  });\n  child.stdin.write(config + '\\n', 'utf8');\n  child.stdin.end();\n};\n\nfunction kill(child, onData, onError) {\n  child.stdin.end();\n  child.kill();\n}","map":{"version":3,"names":["fs","require","childprocess","path","assert","phantomjs","err","console","log","module","exports","PDF","html","options","script","normalize","join","__dirname","filename","resolve","phantomPath","phantomArgs","length","timeout","parseInt","prototype","toBuffer","PdfToBuffer","callback","exec","execPdfToBuffer","res","readFile","readCallback","buffer","unlink","unlinkPdfFile","toStream","PdfToStream","stream","createReadStream","on","toFile","PdfToFile","arguments","Function","undefined","PdfExec","child","spawn","concat","childProcessOptions","stderr","setTimeout","execTimeout","respond","Error","onError","push","onData","result","json","toString","trim","JSON","parse","process","stdout","write","callbacked","code","data","clearTimeout","kill","postfix","Buffer","message","config","stringify","stdin","end"],"sources":["E:/react-projects/new project/2022/converter/converter/node_modules/html-pdf/lib/pdf.js"],"sourcesContent":["var fs = require('fs')\nvar childprocess = require('child_process')\nvar path = require('path')\nvar assert = require('assert')\n\ntry {\n  var phantomjs = require('phantomjs-prebuilt')\n} catch (err) {\n  console.log('html-pdf: Failed to load PhantomJS module.', err)\n}\n\n/*\n* phantomjs version 1.8.1 and later should work.\n*\n* Create a PDF file out of an html string.\n*\n* Regions for the PDF page are:\n*\n* - Page Header  -> document.getElementById('pageHeader')\n* - Page Content -> document.getElementById('pageContent')\n* - Page Footer  -> document.getElementById('pageFooter')\n*\n* When no #pageContent is available, phantomjs will use document.body as pdf content\n*/\nmodule.exports = PDF\nfunction PDF (html, options) {\n  this.html = html\n  this.options = options || {}\n  if (this.options.script) {\n    this.script = path.normalize(this.options.script)\n  } else {\n    this.script = path.join(__dirname, 'scripts', 'pdf_a4_portrait.js')\n  }\n\n  if (this.options.filename) this.options.filename = path.resolve(this.options.filename)\n  if (!this.options.phantomPath) this.options.phantomPath = phantomjs && phantomjs.path\n  this.options.phantomArgs = this.options.phantomArgs || []\n  assert(this.options.phantomPath, \"html-pdf: Failed to load PhantomJS module. You have to set the path to the PhantomJS binary using 'options.phantomPath'\")\n  assert(typeof this.html === 'string' && this.html.length, \"html-pdf: Can't create a pdf without an html string\")\n  this.options.timeout = parseInt(this.options.timeout, 10) || 30000\n}\n\nPDF.prototype.toBuffer = function PdfToBuffer (callback) {\n  this.exec(function execPdfToBuffer (err, res) {\n    if (err) return callback(err)\n    fs.readFile(res.filename, function readCallback (err, buffer) {\n      if (err) return callback(err)\n      fs.unlink(res.filename, function unlinkPdfFile (err) {\n        if (err) return callback(err)\n        callback(null, buffer)\n      })\n    })\n  })\n}\n\nPDF.prototype.toStream = function PdfToStream (callback) {\n  this.exec(function (err, res) {\n    if (err) return callback(err)\n    try {\n      var stream = fs.createReadStream(res.filename)\n    } catch (err) {\n      return callback(err)\n    }\n\n    stream.on('end', function () {\n      fs.unlink(res.filename, function unlinkPdfFile (err) {\n        if (err) console.log('html-pdf:', err)\n      })\n    })\n\n    callback(null, stream)\n  })\n}\n\nPDF.prototype.toFile = function PdfToFile (filename, callback) {\n  assert(arguments.length > 0, 'html-pdf: The method .toFile([filename, ]callback) requires a callback.')\n  if (filename instanceof Function) {\n    callback = filename\n    filename = undefined\n  } else {\n    this.options.filename = path.resolve(filename)\n  }\n  this.exec(callback)\n}\n\nPDF.prototype.exec = function PdfExec (callback) {\n  var child = childprocess.spawn(this.options.phantomPath, [].concat(this.options.phantomArgs, [this.script]), this.options.childProcessOptions)\n  var stderr = []\n\n  var timeout = setTimeout(function execTimeout () {\n    respond(null, new Error('html-pdf: PDF generation timeout. Phantom.js script did not exit.'))\n  }, this.options.timeout)\n\n  function onError (buffer) {\n    stderr.push(buffer)\n  }\n\n  function onData (buffer) {\n    var result\n    try {\n      var json = buffer.toString().trim()\n      if (json) result = JSON.parse(json)\n    } catch (err) {\n      // Proxy for debugging purposes\n      process.stdout.write(buffer)\n    }\n\n    if (result) respond(null, null, result)\n  }\n\n  var callbacked = false\n  function respond (code, err, data) {\n    if (callbacked) return\n    callbacked = true\n    clearTimeout(timeout)\n\n    // If we don't have an exit code, we kill the process, ignore stderr after this point\n    if (code === null) kill(child, onData, onError)\n\n    if (!data) {\n      if (!err && code) err = new Error(\"html-pdf: Received the exit code '\" + code + \"'\")\n      else if (!err) err = new Error('html-pdf: Unknown Error')\n\n      var postfix = stderr.length ? '\\n' + Buffer.concat(stderr).toString() : ''\n      if (postfix) err.message += postfix\n      return callback(err, null)\n    }\n\n    callback(null, data)\n  }\n\n  child.stdout.on('data', onData)\n  child.stderr.on('data', onError)\n  child.on('error', function onError (err) { respond(null, err) })\n\n  // An exit event is most likely an error because we didn't get any data at this point\n  child.on('close', respond)\n  child.on('exit', respond)\n\n  var config = JSON.stringify({html: this.html, options: this.options})\n  child.stdin.write(config + '\\n', 'utf8')\n  child.stdin.end()\n}\n\nfunction kill (child, onData, onError) {\n  child.stdin.end()\n  child.kill()\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}